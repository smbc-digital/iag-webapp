function extractFromAdress(e,t){for(var o=0;o<e.length;o++)for(var a=0;a<e[o].types.length;a++)if(e[o].types[a]==t)return e[o].long_name;return""}function UpdateLocationFieldSize(){$("#hiddenSelectLocation").html("<option>"+$("#postcode").val()+"</option>"),$("#postcode").width($("#hiddenSelectLocation").width())}function SetupCharsRemaining(){$(".chars-remaining").each(function(e,t){$input=$(t).siblings(".form-control-deep");var o=$input.data("val-length-max");DisplayCharsRemaining($input,o),$input.on("keyup",function(){DisplayCharsRemaining(this,o)})})}function DisplayCharsRemaining(e,t){var o=NumberOfRemainingCharacters(e,t);0>o?(o*=-1,$input.siblings(".chars-remaining").html("<small class='error-text'>"+o+" characters over the limit</small>")):$input.siblings(".chars-remaining").html("<small>"+o+" characters remaining</small>")}function NumberOfRemainingCharacters(e,t){var o=$(e),a=o.val(),i=parseInt(t),r=a.match(/(\n)/g),c=0;null!=r&&(c=r.length);var l=a.length+c,n=i-l;return n}function OnlySubmitFormIfValid(){$("form").submit(function(e){console.log("form submission triggered");var t=$(".chars-remaining");if(t.length>0){$input=t.siblings(".form-control-deep");var o=$input.data("val-length-max");NumberOfRemainingCharacters($input,o)<0&&e.preventDefault()}})}function UpdateOptions(e){var t=$("#Category1 :selected").val(),o=$("#Category2 :selected").val(),a=$("#Category3 :selected").val(),i=$("#"+e+":selected").val();$("#Category3 option[value='"+i+"']").show(),$("#Category2 option[value='"+i+"']").show(),$("#Category1 option[value='"+i+"']").show(),t&&t!==i&&($("#Category2 option[value='"+t+"']").hide(),$("#Category3 option[value='"+t+"']").hide()),o&&o!==i&&($("#Category1 option[value='"+o+"']").hide(),$("#Category3 option[value='"+o+"']").hide()),a&&a!==i&&($("#Category1 option[value='"+a+"']").hide(),$("#Category2 option[value='"+a+"']").hide())}function SwapLogo(){var e=$("#header .logo-main-image"),t=e.attr("data-mobile-image"),o=e.attr("data-desktop-image");$(window).width()<=mobileWidth?e.attr("src",t):e.attr("src",o)}function setEndDateToStartDate(e,t){if(!Modernizr.inputtypes.date){var o=$("#"+t).val();if(null!=o){var a=$("#"+e).val();""===a&&$("#"+e).val(o)}}}$(".launch-fullscreen-overlay[data-overlay]").on("click",function(){var e=$(this).data("overlay"),t=$("#"+e),o="launch-overlay-"+e;if($("body").addClass("overlay-open no-scroll").trigger(o),!$("body").hasClass("container-layout-free")){var a=$("#container .wrap-all").eq(0),i=a.outerWidth(),r=a.offset().left,c={width:i,left:r};t.css(c),t.find(".button-close").css(c)}t.addClass("is-active"),setTimeout(function(){t.addClass("is-open")},10)}),$(".fullscreen-overlay .button-close").on("click",function(){var e=$(this).parent().trigger("close");e.removeClass("is-open"),setTimeout(function(){e.removeClass("is-active"),$("body").removeClass("no-scroll overlay-open")},500)}),$(".alert-close a").on("click",function(){$(this).closest(".alert").hide(),0===$(".alert:visible").length&&$(".alert-container").css("margin-bottom","0")}),0===$(".alert:visible").length&&$(".alert-container").css("margin-bottom","0"),$(function(){var e=$("iframe[src^='https://www.youtube.com']"),t=$("article");e.each(function(){$(this).data("aspectRatio",this.height/this.width).removeAttr("height").removeAttr("width")}),$(window).resize(function(){var o=t.width();e.each(function(){var e=$(this);e.width(o).height(o*e.data("aspectRatio"))})}).resize()});var matchboxFeaturedItemsShowcase=new Matchbox({parentSelector:".group-listing-container",childSelector:".group-li .group-card",groupsOf:1,breakpoints:[{bp:767,groupsOf:2},{bp:1024,groupsOf:3}]});$(document).ready(function(){$(".group-listing-container").length&&matchboxFeaturedItemsShowcase.init()}());var matchboxFeaturedItemsShowcase=new Matchbox({parentSelector:".featured-category-items-wrapper",childSelector:".featured-group-category",groupsOf:3,breakpoints:[{bp:767,groupsOf:5},{bp:1024,groupsOf:5}]});$(document).ready(function(){$(".featured-category-items-wrapper").length&&matchboxFeaturedItemsShowcase.init()}()),$(document).ready(function(){$("#edit-search").hide(),$(".result-arrow").addClass("result-search-down-arrow"),$("#open-edit-search").click(function(){$("#edit-search").show(),$(".result-arrow").toggleClass("result-search-down-arrow"),$(".result-arrow").toggleClass("result-search-up-arrow"),$(".result-search-down-arrow").parent().click(function(){$("#edit-search").show()}),$(".result-search-up-arrow").parent().click(function(){$("#edit-search").hide()})})}),$(document).ready(function(){$("#selectCategory").change(function(){$("#hiddenSelectCategory").html("<option>"+$("#selectCategory").find(":selected").text()+"</option>"),$("#selectCategory").width($("#hiddenSelectCategory").width())}),$("#selectOrder").change(function(){$("#hiddenSelectOrder").html("<option>"+$("#selectOrder").find(":selected").text()+"</option>"),$("#selectOrder").width($("#hiddenSelectOrder").width())}),$("#postcode").change(function(){$("#hiddenSelectLocation").html("<option>"+$("#postcode").val()+"</option>"),$("#postcode").width($("#hiddenSelectLocation").width())}),$("#selectOrderMobile").change(function(){var e=$("#selectOrderMobile").find(":selected").text();$("#sortBy").val(e),$("#filterButtonMobile").click()})}),$(window).resize(function(){$("#hiddenSelectCategory").html("<option>"+$("#selectCategory").find(":selected").text()+"</option>"),$("#selectCategory").width($("#hiddenSelectCategory").width()),$("#hiddenSelectOrder").html("<option>"+$("#selectOrder").find(":selected").text()+"</option>"),$("#selectOrder").width($("#hiddenSelectOrder").width()),$("#hiddenSelectLocation").html("<option>"+$("#postcode").val()+"</option>"),$("#postcode").width($("#hiddenSelectLocation").width())}),$(document).ready(function(){$("#postcode, #postcodeMobile, #postcode-autocomplete").click(function(){$("#getLocation, #getLocationMobile").toggle()}),$("#currentLocation, #currentLocationMobile").click(function(){return navigator.geolocation.getCurrentPosition(function(e){var t=new google.maps.Geocoder,o=new google.maps.LatLng(e.coords.latitude,e.coords.longitude);t.geocode({latLng:o},function(e,t){if(t===google.maps.GeocoderStatus.OK){var o=extractFromAdress(e[0].address_components,"route"),a=extractFromAdress(e[0].address_components,"postal_code"),i=extractFromAdress(e[0].address_components,"locality"),r=(o+" "+a+" "+i).trim();$("#location, #locationMobile").val(r)}else alert("We couldn't find your current location.")})},function(){alert("We couldn't find your current location -- please check the location settings on your device.")}),!1}),$("#btnLocation").click(function(e){e.preventDefault();var t=$("#location").val(),o=new google.maps.Geocoder;o.geocode({address:t+", UK"},function(e,o){if(""!==t)if(o===google.maps.GeocoderStatus.OK){var a=extractFromAdress(e[0].address_components,"route"),i=extractFromAdress(e[0].address_components,"postal_code"),r=extractFromAdress(e[0].address_components,"locality"),c=(a+" "+i+" "+r).trim();$("#postcode, #postcodeMobile").val(c),$("#latitude, #latitudeMobile").val(e[0].geometry.location.lat()),$("#longitude, #longitudeMobile").val(e[0].geometry.location.lng()),UpdateLocationFieldSize(),$("#getLocation, #getLocationMobile").hide()}else alert("We couldn't find that location.");else $("#postcode, #postcodeMobile").val("Stockport"),$("#latitude #postcodeMobile").val("53.405817"),$("#longitude #latitudeMobile").val("-2.158046"),UpdateLocationFieldSize(),$("#getLocation, #getLocationMobile").hide()})}),$("#btnLocationAutoComplete").click(function(a){a.preventDefault(),$("#postcode, #postcodeMobile").val(e),$("#latitude, #latitudeMobile").val(t),$("#longitude, #longitudeMobile").val(o),UpdateLocationFieldSize(),$("#getLocation, #getLocationMobile").hide()});var e="Stockport",t=53.405817,o=-2.158046,a=new google.maps.LatLngBounds(new google.maps.LatLng(49.383639452689664,-17.39866406249996),new google.maps.LatLng(59.53530451232491,8.968523437500039)),i={bounds:a,types:["locality","postal_code","sublocality","country","administrative_area_level_1","administrative_area_level_2"],componentRestrictions:{country:"gb"}},r=document.getElementById("location-autocomplete"),c=new google.maps.places.SearchBox(r,i);c.addListener("places_changed",function(){var a=c.getPlaces();0!=a.length&&(e=a[0].name,t=a[0].geometry.location.lat(),o=a[0].geometry.location.lng())}),$("#btnLocationMobile").click(function(e){e.preventDefault();var t=$("#locationMobile").val(),o=new google.maps.Geocoder;o.geocode({address:t+", UK"},function(e,o){if(""!==t)if(o===google.maps.GeocoderStatus.OK){var a=extractFromAdress(e[0].address_components,"route"),i=extractFromAdress(e[0].address_components,"postal_code"),r=extractFromAdress(e[0].address_components,"locality"),c=(a+" "+i+" "+r).trim();$("#postcode, #postcodeMobile").val(c),$("#latitude, #latitudeMobile").val(e[0].geometry.location.lat()),$("#longitude, #longitudeMobile").val(e[0].geometry.location.lng()),UpdateLocationFieldSize(),$("#getLocation, #getLocationMobile").hide()}else alert("We couldn't find that location.");else $("#postcode, #postcodeMobile").val("Stockport"),$("#latitude #postcodeMobile").val("53.405817"),$("#longitude #latitudeMobile").val("-2.158046"),UpdateLocationFieldSize(),$("#getLocation, #getLocationMobile").hide()})})});var matchboxFeaturedItemsShowcase=new Matchbox({parentSelector:".featured-items-wrapper",childSelector:".featured-topic",groupsOf:3,breakpoints:[{bp:767,groupsOf:4},{bp:1024,groupsOf:5}]});$(document).ready(function(){$(".featured-items-wrapper").length&&matchboxFeaturedItemsShowcase.init()}()),$(".carousel a").css("display","block"),$(".carousel div").css("display","block"),$(document).ready(function(){$(".carousel").slick({arrows:!0,infinite:!0,slidesToShow:1,slidesToScroll:1,dots:!0,autoplay:!0,autoplaySpeed:5e3})}),$(document).ready(function(){var e;!function(){var t={customerId:112,engineId:1144,type:"standardOverlay",hideSearchFilters:!0,initSearchBoxText:"",searchInputs:["cludo-search-form","cludo-search-mobile-form","cludo-search-hero-form"],theme:{themeColor:"#055c58",themeBannerColor:{textColor:"#333",backgroundColor:"#f2f2f2"},borderRadius:10},language:"en"};e=new Cludo(t),e.init()}()}),jQuery(document).ready(function(e){SetupCharsRemaining(),OnlySubmitFormIfValid()}),$(document).ready(function(){$("#EndDate").val()||$("input[name='Frequency']:checked").val()||$(".schedule_multiple_events_inputs").hide(),$(".additional-category").hide(),$(".schedule_multiple_events").show(),$(".schedule_multiple_events").change(function(){$(".schedule_multiple_events_inputs").slideToggle(200)}),$("#Category1").change(function(){if(""===$("#Category1 :selected").val())$("#add-category2").hide(),$("#remove-category1").hide();else{var e=$("#Category1 :selected").val(),t=$("#Category2 :selected").val(),o=$("#Category3 :selected").val();$("#Category3 option").show(),$("#Category2 option").show(),t&&($("#Category1 option[value='"+e+"']").hide(),$("#Category2 option[value='"+e+"']").hide()),o&&($("#Category1 option[value='"+o+"']").hide(),$("#Category2 option[value='"+o+"']").hide()),$("#Category3 option[value='"+e+"']").hide(),$("#Category2 option[value='"+e+"']").hide(),"none"===$("#category-div2").css("display")?($("#add-category2").show(),$("#remove-category1").hide()):$("#add-category2").hide(),$("#remove-category1").parent().show()}}),$("#Category2").change(function(){if("none"===$("#category-div3").css("display")&&$("#add-category3").show(),""===$("#Category2").val()&&"none"===$("#category-div3").css("display")&&($("#add-category3").hide(),$("#remove-category1").hide()),""!==$("#Category2").val()){var e=$("#Category1 :selected").val(),t=$("#Category2 :selected").val(),o=$("#Category3 :selected").val();$("#Category3 option").show(),$("#Category1 option").show(),e&&($("#Category2 option[value='"+e+"']").hide(),$("#Category3 option[value='"+e+"']").hide()),o&&($("#Category2 option[value='"+o+"']").hide(),$("#Category1 option[value='"+o+"']").hide()),$("#Category1 option[value='"+t+"']").hide(),$("#Category3 option[value='"+t+"']").hide(),$("#remove-category1").show()}}),$("#Category3").change(function(){var e=$("#Category1 :selected").val(),t=$("#Category2 :selected").val(),o=$("#Category3 :selected").val();$("#Category1 option").show(),$("#Category2 option").show(),e&&($("#Category3 option[value='"+e+"']").hide(),$("#Category2 option[value='"+e+"']").hide()),t&&($("#Category3 option[value='"+t+"']").hide(),$("#Category1 option[value='"+t+"']").hide()),$("#Category1 option[value='"+o+"']").hide(),$("#Category2 option[value='"+o+"']").hide()}),$("#add-category2").click(function(){var e=$("#Category1 :selected").val();return e&&($("#Category2 option[value='"+e+"']").hide(),$("#category-div2").show(),$("#remove-category2").parent().show(),$("#remove-category2").show(),$(this).hide()),!1}),$("#add-category3").click(function(){var e=$("#Category1 :selected").val(),t=$("#Category2 :selected").val();return e&&t&&($("#Category3 option[value='"+e+"']").hide(),$("#Category3 option[value='"+t+"']").hide(),$("#category-div3").show(),$("#remove-category3").parent().show(),$("#remove-category3").show(),$(this).hide()),!1}),$("#remove-category3").click(function(){return UpdateOptions("Category3"),$("#category-div3").hide(),$("#Category3").val(""),$(this).hide(),$("#Category2").val()&&$("#add-category3").show(),!1}),$("#remove-category2").click(function(){return UpdateOptions("Category2"),"none"===$("#category-div3").css("display")?($("#category-div2").hide(),$("#add-category2").show(),$("#Category2").val(""),$("#remove-category1").hide()):"block"===$("#Category3").css("display")&&""!==$("#Category3").val()?($("#Category2").val($("#Category3").val()),$("#Category3").val(""),$("#category-div3").hide(),$("#add-category3").show()):"block"===$("#Category3").css("display")&&($("#Category2").val($("#Category3").val()),$("#category-div3").hide()),""===$("#Category2").val()&&($("#add-category3").hide(),$("#remove-category1").hide()),""===$("#Category1 :selected").val()&&$("#add-category2").hide(),!1}),$("#remove-category1").click(function(){return UpdateOptions("Category1"),"block"==$("#category-div3").css("display")&&"block"==$("#category-div2").css("display")?($("#Category1").val($("#Category2").val()),$("#Category2").val($("#Category3").val()),$("#Category3").val(""),$("#category-div3").hide(),$("#add-category3").show()):"none"==$("#category-div3").css("display")&&($("#Category1").val($("#Category2").val()),$("#Category2").val(""),$("#category-div2").hide(),$("#add-category2").show(),$(this).hide()),""===$("#Category1").val()&&($("#remove-category1").hide(),$("#add-category2").hide()),""===$("#Category2 :selected").val()&&$("#add-category3").hide(),!1})}),$(document).ready(function(){$(".l-filters .filter-title, .l-filters .filter-inner-title").click(function(){$(this).siblings("ul").slideToggle(100,function(){$(this).parent("li").toggleClass("is-collapsed")})});var e=1007;$(window).width()<=e?($(".l-filters .collapsible:not(#custom-filter-li)").addClass("is-collapsed"),$(".filters-list li.active .field-validation-error").parents("li").removeClass("is-collapsed")):($(".l-filters .filter:not(#custom-filter-li):not(#date-filter):not(#category-filter).collapsible").addClass("is-collapsed"),$(".l-filters .filter:not(#custom-filter-li):not(#date-filter):not(#category-filter) .collapsible").addClass("is-collapsed")),$("#custom-filter-li").hasClass("customdateactive")&&$("#custom-filter-li").removeClass("is-collapsed"),$(window).width()>e&&$(".filters-list li.active").each(function(){$(this).parents("li").removeClass("is-collapsed")})});var matchboxTopicsHomepagePrimary=new Matchbox({parentSelector:".featured-topics .featured-topics-primary .featured-topic-list",childSelector:".featured-topic",groupsOf:3,breakpoints:[{bp:767,groupsOf:3},{bp:1024,groupsOf:3}]}),matchboxTopicsHomepageSecond=new Matchbox({parentSelector:".featured-topics .primary-topics .featured-topic-list",childSelector:".featured-topic",groupsOf:5,breakpoints:[{bp:767,groupsOf:5},{bp:1024,groupsOf:5}]}),matchboxTopicsHomepageMore=new Matchbox({parentSelector:".featured-topics #more-topics .featured-topic-list.hide-on-mobile",childSelector:".featured-topic",groupsOf:5,breakpoints:[{bp:767,groupsOf:5},{bp:1024,groupsOf:5}]}),matchboxTopicsHomepageMoreMobile=new Matchbox({parentSelector:".featured-topics #more-topics .featured-topic-list.hide-on-desktop",childSelector:".featured-topic",groupsOf:5,breakpoints:[{bp:767,groupsOf:4},{bp:1024,groupsOf:4}]}),matchboxNewsHomepage=new Matchbox({parentSelector:".homepage-news-items",childSelector:".homepage-news-item",groupsOf:2}),$seeMoreServicesButton=$("#see-more-services, #see-more-services-mobile"),$moreFeaturedTopicsDiv=$("#more-topics");if($(document).ready(function(){$(".featured-topics .featured-topics-primary").length&&matchboxTopicsHomepagePrimary.init(),$(".featured-topics .primary-topics").length&&matchboxTopicsHomepageSecond.init(),$(".featured-topics #more-topics").length&&matchboxTopicsHomepageMore.init(),$(".featured-topics #more-topics").length&&matchboxTopicsHomepageMoreMobile.init(),$(".homepage-news-items").length&&matchboxNewsHomepage.init(),$moreFeaturedTopicsDiv.hide(),$seeMoreServicesButton.addClass("is-visible")}()),$seeMoreServicesButton.on("click",function(){$moreFeaturedTopicsDiv.slideToggle(200,function(){$seeMoreServicesButton.hasClass("is-collapsed")?($seeMoreServicesButton.text("See more services"),$seeMoreServicesButton.toggleClass("is-collapsed")):($seeMoreServicesButton.text("See fewer services"),$seeMoreServicesButton.toggleClass("is-collapsed"))}),$(".featured-topics #more-topics").length&&matchboxTopicsHomepageMore.init(),$(".featured-topics #more-topics").length&&matchboxTopicsHomepageMoreMobile.init()}),"https:"==location.protocol)var dplat="https://stockportb.logo-net.co.uk/Delivery/TBURT.php";else var dplat="http://stockportb.logo-net.co.uk/Delivery/TBURT.php";var strPURL=parent.document.URL;strPURL=strPURL.replace(/&/g,"^"),strPURL=strPURL.toLowerCase(),strPURL=strPURL.replace(/</g,"-1"),strPURL=strPURL.replace(/>/g,"-2"),strPURL=strPURL.replace(/%3c/g,"-1"),strPURL=strPURL.replace(/%3e/g,"-2");var T=new Date,cMS=T.getTime(),src=dplat+"?SDTID=142&PURL="+strPURL+"&CMS="+cMS,headID=document.getElementsByTagName("head")[0],newScript=document.createElement("script");newScript.type="text/javascript",newScript.src=src,headID.appendChild(newScript),document.documentElement.className=document.documentElement.className.replace("no-js","js");var mobileWidth=767,tabletWidth=1007,matchboxPrimary=new Matchbox({parentSelector:".l-page-content .nav-card-list",childSelector:".nav-card .nav-card-item",groupsOf:1,breakpoints:[{bp:1024,groupsOf:3}]});$(document).ready(function(){SwapLogo(),$(".show-search-button").click(function(){$("#mobileSearchInput").slideToggle(220),$(".show-search-button").toggleClass("arrow")}),$(".l-page-content .nav-card-list").length&&matchboxPrimary.init(),Modernizr.inputtypes.date||($(".datepicker").datepicker({inline:!0,dateFormat:"dd/mm/yy"}),$(".hasDatepicker").each(function(){var e=$(this).val();if(null!==e&&""!==e){var t=new Date(e);$(this).val($.datepicker.formatDate("dd/mm/yy",t))}}),$.validator&&$.validator.addMethod("date",function(e,t){if(this.optional(t))return!0;var o=!0;try{$.datepicker.parseDate("dd/mm/yy",e)}catch(a){o=!1}return o}))}),$(window).resize(function(){SwapLogo(),$(window).width()>tabletWidth&&($("#mobileSearchInput").hide(),$(".show-search-button").removeClass("arrow"),$("#displayRefineBy").css("display","block"))}),$(".global-alert-close-container a").on("click",function(){$(this).closest(".global-alert").hide()});