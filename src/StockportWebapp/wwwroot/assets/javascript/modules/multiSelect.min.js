define(["jquery"],function(o){var a,s,v,c="",r=("block"==o("#categoryListError").css("display")&&(o(".CategoriesList-select").addClass("input-validation-error"),o(".CategoriesList-select").css("margin-bottom","0px")),function(){for(var e=o("."+c+"-div:visible"),i="",t=0;t<e.length;t++){0<t&&(i+="|");var l=o("select",o(e)[t]);i+=o(l).val()}o("#"+c).val(i)}),h=function(){var e=!0;return o("."+c+"-select:visible").each(function(){e=e&&null!==o(this).val()&&""!==o(this).val()}),e},d=function(){s=o("#"+c).val(),v=s.split("|");var e=0===(e=s.length>a?a:s.length)?1:e;v=v.slice(0,e),o("."+c+"-div").hide(),o("."+c+"-add").hide(),o("."+c+"-remove").hide(),o("."+c+"-select").val(""),o('option[value=""]',"."+c+"-select").show();for(var i=0;i<v.length;i++){var t=o("."+c+"-div")[i];void 0!==t&&(o(t).show(),t=o("."+c+"-select")[i],null!==v[i]&&0<v[i].length&&(o('option[value=""]',t).hide(),o(t).val(v[i])),o(t).off("change").on("change",function(){var e;e=(e=o("."+c+"-add","."+c+"-div:visible"))[e.length-1],h()?(o(e).show(),o("#categoryListError").hide(),o(".CategoriesList-select").removeClass("input-validation-error"),o(".CategoriesList-select").css("margin-bottom","10px")):o(e).hide(),r(),d()}))}o('option[value!=""]',"."+c+"-select").show(),o("."+c+"-select").each(function(e){var i=e,t=o(this).val();o("."+c+"-select").each(function(e){i!==e&&o('option[value="'+t+'"]',this).hide()})});for(var l=o("."+c+"-div:visible"),i=0;i<l.length;i++){var n=o("."+c+"-add")[i],n=(i===l.length-1&&l.length<a&&(h()&&o(n).show(),o(n).off("click").on("click",function(){var e;e=o("#"+c).val()+"|",o("#"+c).val(e),d()})),o("."+c+"-remove-link")[i]);o(n).off("click").on("click",function(){o(this).parent().parent().hide(),r(),d()}),!function(){var e=o("."+c+"-remove"),i=(o(e).show(),-1),t=0,l=o("."+c+"-div:visible"),n=o("select",o(l));o(n).each(function(e){null!==o(this).val()&&""!==o(this).val()&&(-1===i&&(i=e),t++)}),1===t&&o(o(e)[i]).hide(),1===l.length&&o(o(e)[0]).hide()}()}};return{Init:function(e){a=o("#"+(c=e)+"-limit").val(),d()}}});