define(["jquery"],function(e){var i,t,l=3,a="";"block"==e("#categoryListError").css("display")&&(e(".CategoriesList-select").addClass("input-validation-error"),e(".CategoriesList-select").css("margin-bottom","0px"));var n=function(){var i=e("."+a+"-remove");e(i).show();var t=-1,l=0,n=e("."+a+"-div:visible"),o=e("select",e(n));e(o).each(function(i){null!==e(this).val()&&""!==e(this).val()&&(-1===t&&(t=i),l++)}),1===l&&e(e(i)[t]).hide(),1===n.length&&e(e(i)[0]).hide()},o=function(){for(var i=e("."+a+"-div:visible"),t="",l=0;l<i.length;l++){l>0&&(t+="|");var n=e("select",e(i)[l]);t+=e(n).val()}e("#"+a).val(t)},s=function(){var i=!0;return e("."+a+"-select:visible").each(function(){i=i&&null!==e(this).val()&&""!==e(this).val()}),i},v=function(){i=e("#"+a).val(),t=i.split("|");var r=i.length>l?l:i.length;r=0===r?r=1:r,t=t.slice(0,r),e("."+a+"-div").hide(),e("."+a+"-add").hide(),e("."+a+"-remove").hide(),e("."+a+"-select").val(""),e('option[value=""]',"."+a+"-select").show();for(var c=0;c<t.length;c++){var h=e("."+a+"-div")[c];if(void 0!==h){e(h).show();var d=e("."+a+"-select")[c];null!==t[c]&&t[c].length>0&&(e('option[value=""]',d).hide(),e(d).val(t[c])),e(d).off("change").on("change",function(){var i,t;i=e("."+a+"-add","."+a+"-div:visible"),t=i[i.length-1],s()?(e(t).show(),e("#categoryListError").hide(),e(".CategoriesList-select").removeClass("input-validation-error"),e(".CategoriesList-select").css("margin-bottom","10px")):e(t).hide(),o(),v()})}}e('option[value!=""]',"."+a+"-select").show(),e("."+a+"-select").each(function(i){var t=i,l=e(this).val();e("."+a+"-select").each(function(i){t!==i&&e('option[value="'+l+'"]',this).hide()})});var u=e("."+a+"-div:visible");for(c=0;c<u.length;c++){var f=e("."+a+"-add")[c];c===u.length-1&&u.length<l&&(s()&&e(f).show(),e(f).off("click").on("click",function(){var i;i=e("#"+a).val()+"|",e("#"+a).val(i),v()}));var g=e("."+a+"-remove-link")[c];e(g).off("click").on("click",function(){e(this).parent().parent().hide(),o(),v()}),n()}};return{Init:function(i){l=e("#"+(a=i)+"-limit").val(),v()}}});