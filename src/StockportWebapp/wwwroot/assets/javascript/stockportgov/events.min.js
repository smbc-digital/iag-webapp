define(["jquery"],function(e){var a=function(a,o){if(!Modernizr.inputtypes.date){var t=e("#"+o).val();if(null!=t){var r=e("#"+a).val();""===r&&e("#"+a).val(t)}}},o=function(a){var o=e("#Category1 :selected").val(),t=e("#Category2 :selected").val(),r=e("#Category3 :selected").val(),i=e("#"+a+":selected").val();e("#Category3 option[value='"+i+"']").show(),e("#Category2 option[value='"+i+"']").show(),e("#Category1 option[value='"+i+"']").show(),o&&o!==i&&(e("#Category2 option[value='"+o+"']").hide(),e("#Category3 option[value='"+o+"']").hide()),t&&t!==i&&(e("#Category1 option[value='"+t+"']").hide(),e("#Category3 option[value='"+t+"']").hide()),r&&r!==i&&(e("#Category1 option[value='"+r+"']").hide(),e("#Category2 option[value='"+r+"']").hide())},t=function(){Modernizr.inputtypes.date||(e(".datepicker").datepicker({inline:!0,dateFormat:"dd/mm/yy"}),e(".hasDatepicker").each(function(){var a=e(this).val();if(null!==a&&""!==a){var o=new Date(a);e(this).val(e.datepicker.formatDate("dd/mm/yy",o))}}),e.validator&&e.validator.addMethod("date",function(a,o){if(this.optional(o))return!0;var t=!0;try{e.datepicker.parseDate("dd/mm/yy",a)}catch(r){t=!1}return t}))},r=function(){e("#Category1").change(function(){if(""===e("#Category1 :selected").val())e("#add-category2").hide(),e("#remove-category1").hide();else{var a=e("#Category1 :selected").val(),o=e("#Category2 :selected").val(),t=e("#Category3 :selected").val();e("#Category3 option").show(),e("#Category2 option").show(),o&&(e("#Category1 option[value='"+a+"']").hide(),e("#Category2 option[value='"+a+"']").hide()),t&&(e("#Category1 option[value='"+t+"']").hide(),e("#Category2 option[value='"+t+"']").hide()),e("#Category3 option[value='"+a+"']").hide(),e("#Category2 option[value='"+a+"']").hide(),"none"===e("#category-div2").css("display")?(e("#add-category2").show(),e("#remove-category1").hide()):e("#add-category2").hide(),e("#remove-category1").parent().show()}}),e("#Category2").change(function(){if("none"===e("#category-div3").css("display")&&e("#add-category3").show(),""===e("#Category2").val()&&"none"===e("#category-div3").css("display")&&(e("#add-category3").hide(),e("#remove-category1").hide()),""!==e("#Category2").val()){var a=e("#Category1 :selected").val(),o=e("#Category2 :selected").val(),t=e("#Category3 :selected").val();e("#Category3 option").show(),e("#Category1 option").show(),a&&(e("#Category2 option[value='"+a+"']").hide(),e("#Category3 option[value='"+a+"']").hide()),t&&(e("#Category2 option[value='"+t+"']").hide(),e("#Category1 option[value='"+t+"']").hide()),e("#Category1 option[value='"+o+"']").hide(),e("#Category3 option[value='"+o+"']").hide(),e("#remove-category1").show()}}),e("#Category3").change(function(){var a=e("#Category1 :selected").val(),o=e("#Category2 :selected").val(),t=e("#Category3 :selected").val();e("#Category1 option").show(),e("#Category2 option").show(),a&&(e("#Category3 option[value='"+a+"']").hide(),e("#Category2 option[value='"+a+"']").hide()),o&&(e("#Category3 option[value='"+o+"']").hide(),e("#Category1 option[value='"+o+"']").hide()),e("#Category1 option[value='"+t+"']").hide(),e("#Category2 option[value='"+t+"']").hide()}),e("#add-category2").click(function(){var a=e("#Category1 :selected").val();return a&&(e("#Category2 option[value='"+a+"']").hide(),e("#category-div2").show(),e("#remove-category2").parent().show(),e("#remove-category2").show(),e(this).hide()),!1}),e("#add-category3").click(function(){var a=e("#Category1 :selected").val(),o=e("#Category2 :selected").val();return a&&o&&(e("#Category3 option[value='"+a+"']").hide(),e("#Category3 option[value='"+o+"']").hide(),e("#category-div3").show(),e("#remove-category3").parent().show(),e("#remove-category3").show(),e(this).hide()),!1}),e("#remove-category3").click(function(){return o("Category3"),e("#category-div3").hide(),e("#Category3").val(""),e(this).hide(),e("#Category2").val()&&e("#add-category3").show(),!1}),e("#remove-category2").click(function(){return o("Category2"),"none"===e("#category-div3").css("display")?(e("#category-div2").hide(),e("#add-category2").show(),e("#Category2").val(""),e("#remove-category1").hide()):"block"===e("#Category3").css("display")&&""!==e("#Category3").val()?(e("#Category2").val(e("#Category3").val()),e("#Category3").val(""),e("#category-div3").hide(),e("#add-category3").show()):"block"===e("#Category3").css("display")&&(e("#Category2").val(e("#Category3").val()),e("#category-div3").hide()),""===e("#Category2").val()&&(e("#add-category3").hide(),e("#remove-category1").hide()),""===e("#Category1 :selected").val()&&e("#add-category2").hide(),!1}),e("#remove-category1").click(function(){return o("Category1"),"block"==e("#category-div3").css("display")&&"block"==e("#category-div2").css("display")?(e("#Category1").val(e("#Category2").val()),e("#Category2").val(e("#Category3").val()),e("#Category3").val(""),e("#category-div3").hide(),e("#add-category3").show()):"none"==e("#category-div3").css("display")&&(e("#Category1").val(e("#Category2").val()),e("#Category2").val(""),e("#category-div2").hide(),e("#add-category2").show(),e(this).hide()),""===e("#Category1").val()&&(e("#remove-category1").hide(),e("#add-category2").hide()),""===e("#Category2 :selected").val()&&e("#add-category3").hide(),!1})},i=function(){t(),r(),e("#EndDate").val()||e("input[name='Frequency']:checked").val()||e(".schedule_multiple_events_inputs").hide(),e(".additional-category").hide(),e(".schedule_multiple_events").show(),e(".schedule_multiple_events").change(function(){e(".schedule_multiple_events_inputs").slideToggle(200)})};return{Init:i,SetEndDateToStartDate:a}});