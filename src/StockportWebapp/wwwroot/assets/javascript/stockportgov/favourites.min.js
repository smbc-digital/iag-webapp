define(["jquery","matchboxconfig"],function(a,i){var n=0,s=!0,u=!1,t=function(){a(".add-favourite a").on("click",function(){var t,e,r=a(this).attr("data-slug"),o=a(this).attr("data-type");t=r,e=o,a.get("/cookies/add?slug="+t+"&cookieType="+e,function(t,e){s&&(n++,d())}),a(".add-favourite").addClass("hidden"),a(".remove-favourite").removeClass("hidden"),a(".print-favourite-group-item").removeClass("hidden")}),a(".remove-favourite a").on("click",function(){var r,t,e=a(this).attr("data-slug"),o=a(this).attr("data-type");r=e,t=o,a.get("/cookies/remove?slug="+r+"&cookieType="+t,function(t,e){s&&(n--,d()),u&&(a("#item-card-"+r).remove(),0===a(".group-card").length&&(a("#no-results").show(),a("#favourites-list").hide()),i.Init())}),a(".add-favourite").removeClass("hidden"),a(".remove-favourite").addClass("hidden"),a(".print-favourite-group-item").addClass("hidden")})},e=function(){var t=function(){var t=window.location.href.toLowerCase().replace("http://","").replace("https://","").split("/");if(1<t.length){var e=t[1];if(2<t.length&&("favourites"===t[2]||"manage"===t[2]))return"favourites"===t[2]&&(u=!0),s=!1,""}switch(e){case"groups":case"organisations":return"StockportWebapp.Models.Group"}return""}();""!==t&&r("favourites")&&(void 0!==a.parseJSON(unescape(r("favourites")))[t]&&a.get("/groups/favourites/get-count",function(t){s&&(n=t,d())}))},d=function(){0==n?a(".favourites-bar").hide():0<a(".favourites-bar").length&&(a(".count",".favourites-bar").html(n),a(".favourites-bar").css("display","block"))},r=function(t){for(var e=t+"=",r=document.cookie.split(";"),o=0;o<r.length;o++){for(var a=r[o];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return""};return{Init:function(){t(),e()}}});