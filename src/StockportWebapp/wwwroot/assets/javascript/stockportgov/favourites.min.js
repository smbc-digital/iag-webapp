define(["jquery","matchboxconfig"],function(t,e){var r=0,a=!0,o=!1,i=function(){t(".add-favourite a").on("click",function(){var e=t(this).attr("data-slug"),o=t(this).attr("data-type");i=e,n=o,t.get("/cookies/add?slug="+i+"&cookieType="+n,function(t,e){a&&(r++,s())});var i,n;t(".add-favourite").addClass("hidden"),t(".remove-favourite").removeClass("hidden"),t(".print-favourite-group-item").removeClass("hidden")}),t(".remove-favourite a").on("click",function(){var i=t(this).attr("data-slug"),n=t(this).attr("data-type");u=i,d=n,t.get("/cookies/remove?slug="+u+"&cookieType="+d,function(i,n){a&&(r--,s()),o&&(t("#item-card-"+u).remove(),0===t(".group-card").length&&(t("#no-results").show(),t("#favourites-list").hide()),e.Init())});var u,d;t(".add-favourite").removeClass("hidden"),t(".remove-favourite").addClass("hidden"),t(".print-favourite-group-item").addClass("hidden")})},n=function(){var e=function(){var t=window.location.href.toLowerCase().replace("http://","").replace("https://","").split("/");if(t.length>1){var e=t[1];if(t.length>2&&("favourites"===t[2]||"manage"===t[2]))return"favourites"===t[2]&&(o=!0),a=!1,""}switch(e){case"groups":case"organisations":return"StockportWebapp.Models.Group"}return""}();if(""!==e&&u("favourites")){void 0!==t.parseJSON(unescape(u("favourites")))[e]&&t.get("/groups/favourites/get-count",function(t){a&&(r=t,s())})}},s=function(){0==r?t(".favourites-bar").hide():t(".favourites-bar").length>0&&(t(".count",".favourites-bar").html(r),t(".favourites-bar").css("display","block"))},u=function(t){for(var e=t+"=",r=document.cookie.split(";"),a=0;a<r.length;a++){for(var o=r[a];" "==o.charAt(0);)o=o.substring(1,o.length);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""};return{Init:function(){i(),n()}}});