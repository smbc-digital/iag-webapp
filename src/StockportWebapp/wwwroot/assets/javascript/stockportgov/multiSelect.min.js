define(["jquery"],function(e){var i,t,n=3,l="";"block"==e("#categoryListError").css("display")&&(e(".CategoriesList-select").addClass("input-validation-error"),e(".CategoriesList-select").css("margin-bottom","0px"));var a=function(i){var t=e("."+l+"-add","."+l+"-div:visible"),n=t[t.length-1];h()?(e(n).show(),e("#categoryListError").hide(),e(".CategoriesList-select").removeClass("input-validation-error"),e(".CategoriesList-select").css("margin-bottom","10px")):e(n).hide(),c(),d()},o=function(i){e(i).parent().parent().hide(),c(),d()},s=function(i){var t=e("#"+l).val()+",";e("#"+l).val(t),d()},r=function(){e('option[value!=""]',"."+l+"-select").show(),e("."+l+"-select").each(function(i){var t=this,n=i,a=e(t).val();e("."+l+"-select").each(function(i){var t=this,l=i;n!==l&&e('option[value="'+a+'"]',t).hide()})})},v=function(){var i=e("."+l+"-remove");e(i).show();var t=-1,n=0,a=e("."+l+"-div:visible"),o=e("select",e(a));e(o).each(function(i){null!==e(this).val()&&""!==e(this).val()&&(-1===t&&(t=i),n++)}),1===n&&e(e(i)[t]).hide(),1===a.length&&e(e(i)[0]).hide()},c=function(){for(var i=e("."+l+"-div:visible"),t="",n=0;n<i.length;n++){n>0&&(t+=",");var a=e("select",e(i)[n]);t+=e(a).val()}e("#"+l).val(t)},h=function(){var i=!0;return e("."+l+"-select:visible").each(function(){i=i&&null!==e(this).val()&&""!==e(this).val()}),i},d=function(){i=e("#"+l).val(),t=i.split(",");var c=i.length>n?n:i.length;c=0===c?c=1:c,t=t.slice(0,c),e("."+l+"-div").hide(),e("."+l+"-add").hide(),e("."+l+"-remove").hide(),e("."+l+"-select").val(""),e('option[value=""]',"."+l+"-select").show();for(var d=0;d<t.length;d++){var f=e("."+l+"-div")[d];if("undefined"!=typeof f){e(f).show();var u=e("."+l+"-select")[d];null!==t[d]&&t[d].length>0&&(e('option[value=""]',u).hide(),e(u).val(t[d])),e(u).off("change").on("change",function(){a(this)})}}r();for(var g=e("."+l+"-div:visible"),d=0;d<g.length;d++){var p=e("."+l+"-add")[d];d===g.length-1&&g.length<n&&(h()&&e(p).show(),e(p).off("click").on("click",function(){s(this)}));var m=e("."+l+"-remove-link")[d];e(m).off("click").on("click",function(){o(this)}),v()}};return{Init:function(i){l=i,n=e("#"+l+"-limit").val(),d()}}});