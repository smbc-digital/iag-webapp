define(["jquery","questionview","questionvalidator"],function(u,r,c){var l;var t=function(e,t,n){var i;i=[],u("#checkbox-list input[type='checkbox']:checked").each(function(){i.push(u(this).parent().find(".question-option-value").val())}),u("#checkbox-response").val(i.join());var o,s=u.Deferred(),a=(o="validate",l.lastIndexOf("/")===l.length-1?"/"+l+o:"/"+l+"/"+o);return u.post(a,e.serialize(),function(){}).done(function(e){c.processValidation(e,t,r.showValidationForQuestion,n)?r.enableNextButton():r.disableNextButton(),s.resolve()}).fail(function(e){s.reject(e.status+" ["+e.statusText+"]")}),s.promise()};return{init:function(e){l=e,r.showNextbutton(),r.bindEventListeners(t)},validateQuestions:t}});