define(["jquery","questionview","questionvalidator"],function(e,t,n){function i(){var e="validate";return a.lastIndexOf("/")===a.length-1?"/"+a+e:"/"+a+"/"+e}function o(){var t="";e("#checkbox-list input[type='checkbox']:checked").each(function(){t=t+","+e(this).parent().find("#question-option-value").val()}),e("#checkbox-response").val(t)}var a,s=function(a,s,u){o();var r=e.Deferred(),c=i();return e.post(c,a.serialize(),function(){}).done(function(e){var i=n.processValidation(e,s,t.showValidationForQuestion,u);i?t.enableNextButton():t.disableNextButton(),r.resolve()}).fail(function(e){r.reject(e.status+" ["+e.statusText+"]")}),r.promise()},u=function(e){a=e,t.showNextbutton(),t.bindEventListeners(s)};return{init:u,validateQuestions:s}});