define(["jquery","matchboxconfig"],function(i,o){var n=0,s=!0,u=!1,t=function(){i(".add-favourite").on("click",function(){var t,e,a=i(this).attr("data-slug"),r=i(this).attr("data-type");t=a,e=r,i.get("/favourites/add?slug="+t+"&type="+e,function(t,e){s&&(n++,f())}),i("#add-favourite-"+a).addClass("hidden"),i("#remove-favourite-"+a).removeClass("hidden")}),i(".remove-favourite").on("click",function(){var a,t,e=i(this).attr("data-slug"),r=i(this).attr("data-type");a=e,t=r,i.get("/favourites/remove?slug="+a+"&type="+t,function(t,e){s&&(n--,f()),u&&(i("#item-card-"+a).remove(),0===i(".group-card").length&&(i("#no-results").show(),i("#favourites-list").hide()),o.Init())}),i("#add-favourite-"+e).removeClass("hidden"),i("#remove-favourite-"+e).addClass("hidden")})},e=function(){var t=function(){var t=window.location.href.toLowerCase().replace("http://","").replace("https://","").split("/");if(1<t.length){var e=t[1];if(2<t.length&&("favourites"===t[2]||"manage"===t[2]))return"favourites"===t[2]&&(u=!0),s=!1,""}switch(e){case"groups":return"StockportWebapp.Models.Group"}return""}();if(""!==t&&a("favourites")){var e=i.parseJSON(unescape(a("favourites")))[t];void 0!==e&&(n=e.length,f())}},f=function(){0==n?i("#favourites-bar").hide():0<i("#favourites-bar").length?(i(".count","#favourites-bar").html(n),i("#favourites-bar").show()):(i("body").append('<div id="favourites-bar"><div class="grid-container grid-100"><i class="fa fa-star"></i><u><span class="count">'+n+"</span><span>&nbsp;favourites</span></u></div></div>"),i("#favourites-bar").animate({bottom:0},500).animate({bottom:-7},100).animate({bottom:0},100),i("#favourites-bar").on("click",function(){var t;window.location.href="/"+(1<(t=window.location.href.toLowerCase().replace("http://","").replace("https://","").split("/")).length?t[1]:"")+"/favourites"}))},a=function(t){for(var e=t+"=",a=document.cookie.split(";"),r=0;r<a.length;r++){for(var i=a[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""};return{Init:function(){t(),e()}}});