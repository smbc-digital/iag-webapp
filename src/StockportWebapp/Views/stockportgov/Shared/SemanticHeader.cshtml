@inject StockportWebapp.Utils.ILoggedInHelper loggedInHelper
@{
    var user = loggedInHelper.GetLoggedInPerson();
    var headerClass = !string.IsNullOrEmpty(user.Email) ? "logged-in" : string.Empty;
}

<div class="skip-to-main-content" role="navigation">
    <a href="#content">Skip to main content</a>
</div>
<div class="center-wrapper">
    <div id="header-logo">
        <a href="https://www.stockport.gov.uk">Stockport Metropolitan Borough Council Homepage</a>
    </div>
    <div class="@headerClass" id="header-my-account">
        <a href="#" id="reciteMe">
            <span class="fa fa-headphones hide-on-mobile" aria-hidden="true"></span>
            Accessibility
        </a>
        @if (!string.IsNullOrEmpty(user.Email))
        {
            <div class="menu-container">
                <div class="menu">
                    <p>Welcome @user.Name</p>
                    <span class="fa fa-user" aria-hidden="true"></span>
                    <a href="/dashboard">My Account</a>
                    <span class="fa fa-angle-down" aria-hidden="true"></span>
                </div>
                <nav class="menu-tooltip">
                    <span class="fa fa-caret-up" aria-hidden="true"></span>
                    @Html.ActionLink("My Account", "Index", "Dashboard")
                    @Html.ActionLink("Account settings", "Settings", "Account")
                    @Html.ActionLink("Sign out", "Logout", "Account", null, new { @class = "sign-out" })
                </nav>
            </div>
            <div class="modal">
                <input id="modal" type="checkbox" name="modal" />
                <label for="modal">
                    <span class="fa fa-user" aria-hidden="true"></span>
                    <span class="hidden">Open account menu</span>
                </label>
                <div class="modal-overlay">
                    <label for="modal" class="button button-outline button-close button-overlay">
                        <span class="fa fa-times" aria-hidden="true"></span>
                        Close
                    </label>
                    <nav class="mobile-menu">
                        <ul>
                            <li>@Html.ActionLink("My Account", "Index", "Dashboard")</li>
                            <li>@Html.ActionLink("Account settings", "Settings", "Account")</li>
                            <li>@Html.ActionLink("Sign out", "Logout", "Account", null, new { @class = "sign-out" })</li>
                        </ul>
                    </nav>
                </div>
            </div>
        }
        else
        {
            <a id="form-myaccount-link" href="https://myaccount.stockport.gov.uk"><span class="fa fa-user" aria-hidden="true"></span>My Account</a>
        }
        <a href="#" class="show-search-button hide-on-desktop">
            <span class="visuallyhidden"> submit search</span>
            <span class="fa fa-search" style="display: inline-block !important; color: #83aeac;" aria-hidden="true"></span>
        </a>
    </div>
    <form method="get" role="search" id="cludo-search-form" class="cludo-search_autocomplete">
        <fieldset class="input-group"></fieldset>
        <label for="search" class="sr-only">Search Stockport council website</label>
        <input id="search" class="search-input" name="query" placeholder="Search" autoComplete="off" type="text" />
        <button type="submit" title="Search Stockport Gov website"><span class="fa fa-search" aria-hidden="true"></span></button>
    </form>
</div>
<partial name="BrowserCheck" />

<script>
    require(['/assets/javascript/config-d85cf3bb.min.js'], function() {
        require(['startup', 'utils', 'reciteMe', 'cludo', 'Cludo'],
            function(startup, utils, reciteMe, cludo) {
                reciteMe.Init();
                startup.Init();
                utils.Init();
                cludo.Init();
            }
        );
    });
</script>