@model StockportWebapp.QuestionBuilder.Entities.Question

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

@{
    var limitValue = @Model.ValidatorData.Any(_ => _.Type == "max-length") ? @Model.ValidatorData.FirstOrDefault(_ => _.Type == "max-length").Value : "500";
}

<div class="form-section question-section">
    <h2 class="h3">@Model.Label</h2>
    <!-- <span style="font-size:15px; color:dimgrey;">@Model.TextSubLabel</span> -->
    <div class="enquiry-message">
        @Html.TextArea("Response", "", new { @class = "", maxLength = @limitValue, data_questionid = Model.QuestionId, aria_labelledby = string.Concat("label-", @Model.QuestionId).Replace(" ", "-"), id = string.Concat(@Model.QuestionId).Replace(" ", "-") })
        <partial name="_ValidationError.cshtml" model='Model' />
        <span class="text-control chars-remaining">
            <small></small>
        </span><br/>
    </div>
</div>

<script type="text/javascript">
    require(['startup', 'text-limiter', 'iag-validate-chars', 'jquery.steps', 'utils', 'unobtrusive'],
        function (startup, textLimiter, iagValidateChars) {
            startup.Init();
            textLimiter.restrictLength(@Model.QuestionId, @limitValue);
            iagValidateChars.Init();
        })
</script>