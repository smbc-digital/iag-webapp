@using Google.Apis.Calendar.v3.Data
@using StockportWebapp.ViewModels;
@using StockportWebapp.Utils
@inject ViewHelpers viewHelper
@model EventCalendar
@{
    DateTime previousEnteredDate = DateTime.MinValue;
    var hasEvents = Model.Events.Any();

}
<div class="grid-container" id="event-listing-container">
    
@if (!hasEvents)
{
    <div class="grid-container grid-100 no-results">
        <h1>There are currently no events matching your search.</h1>
        <p>Please edit your search and try again.</p>
    </div>
}

@foreach (var eventItem in Model.Events)
{
    var start = string.Empty;
    var end = string.Empty;
    if (previousEnteredDate != eventItem.EventDate)
    {
        if (previousEnteredDate != DateTime.MinValue)
        {
            end = "</div>";
        }

        <h2>@viewHelper.FormatEventDate(eventItem.EventDate)</h2>
        start = "<div class=\"event-container-row matchbox-parent\">";
    }

    @Html.Raw(end);
    @Html.Raw(start);

    @Html.Partial("EventCard", eventItem)

    previousEnteredDate = eventItem.EventDate.Date;
}
@if (hasEvents)
{
    @Html.Raw("</div>")
    @Html.Partial("Pagination", Model.Pagination)
}
</div>