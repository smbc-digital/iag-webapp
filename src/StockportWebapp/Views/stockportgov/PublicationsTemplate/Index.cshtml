@using Microsoft.AspNetCore.Html
@using System.Text.Json
@model PublicationsTemplateViewModel
@{
    PublicationsTemplate publicationsTemplate = Model.PublicationsTemplate;
    ViewData["Title"] = publicationsTemplate.Title;
    ViewData["Description"] = publicationsTemplate.MetaDescription;
    ViewData["og:title"] = publicationsTemplate.Title;
    Layout = "../Shared/_Layout2023.cshtml";
}

<div class="grid-container-full-width" style="background-color:white;" data-cy="landing-page">
    @* <partial name="Breadcrumb2023" model="publicationsTemplate.Breadcrumbs" /> *@
    <partial name="Breadcrumb2023" model='new List<Crumb> { new Crumb("About your council", "landing/about-our-website", "Article") }' />

    <div class="grid-container">
        <div class="grid-100">
            <div class="article--70 article-navigation" style="margin-bottom: 1.5em;">
                <p class="lead">Stockport Council Plan 2024 to 2027</p>
                <h1 class="article__title">@publicationsTemplate.Title</h1>
                @* Published: <partial name="FormattedDate" model='@publicationsTemplate.UpdatedAt' /> *@
                Published: 11 July 2024
            </div>
        </div>
    </div>

    @foreach (JsonElement node in publicationsTemplate.Body.GetProperty("content").EnumerateArray())
    {
        object rendered = RichTextRenderer.Render(node);

        if (rendered is EmbeddedPartial partial)
        {
            <partial name="@partial.PartialName" model="@partial.Model" view-data='@(new ViewDataDictionary(ViewData) { { "AllowTwo", true } })' />
        }
        else if (rendered is string html)
        {
            <div class="grid-container">
                <div class="grid-100">
                    @Html.Raw(html)
                </div>
            </div>
        }
    }
</div>