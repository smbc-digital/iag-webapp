@model List<(string src, string alt)>

<section id="carousel" aria-labelledby="carouselheading" class="carousel">
    <h3 id="carouselheading" class="visuallyhidden">Recent news</h3>
    <ul class="carousel-items" role="list">
        @foreach (var item in Model)
        {
            <li class="carousel-item" role="listitem">
                <img src="@item.src?q=89&fm-webp" alt="@item.alt">
            </li>
        }
    </ul>
    
    <button class="carousel-control prev carousel-control-prev" aria-label="Previous Slide">‹</button>
    <button class="carousel-control next carousel-control-next" aria-label="Next Slide">›</button>
    
    <ul class="carousel-indicators">
        @for(int i=0; i<Model.Count; i++)
        {
            <li>
                <button class="current" data-slide="0">
                <span class="visuallyhidden">News</span> @i
                <span class="visuallyhidden">(Current Slide)</span>
            </li>
        }
    </ul>

    @* <div class="carousel-indicators">
        @for(int i=0; i<Model.Count; i++)
        {
            <button aria-label="Go to slide @i"></button>
        }
    </div> *@

    <div id="carousel-status" class="visuallyhidden" aria-live="polite"></div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const carouselItems = document.querySelectorAll(".carousel-item");
        const indicators = document.querySelectorAll(".carousel-indicators button");
        const status = document.getElementById("carousel-status");
        let currentIndex = 0;

        function updateCarousel() {
            document.querySelector(".carousel-items").style.transform = `translateX(-${currentIndex * 100}%)`;

            indicators.forEach((indicator, index) => {
                indicator.classList.toggle("active", index === currentIndex);
                indicator.setAttribute("aria-selected", index === currentIndex);
            });

            status.textContent = `Slide ${currentIndex + 1} of ${carouselItems.length}`;
        }

        document.querySelector(".next").addEventListener("click", function () {
            currentIndex = (currentIndex + 1) % carouselItems.length;
            updateCarousel();
        });

        document.querySelector(".prev").addEventListener("click", function () {
            currentIndex = (currentIndex - 1 + carouselItems.length) % carouselItems.length;
            updateCarousel();
        });

        indicators.forEach((indicator, index) => {
            indicator.addEventListener("click", function () {
                currentIndex = index;
                updateCarousel();
            });
        });

        updateCarousel();
    });
</script>