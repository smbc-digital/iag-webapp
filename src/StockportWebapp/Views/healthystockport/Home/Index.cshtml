@using System.Threading.Tasks
@using StockportWebapp.ProcessedModels
@using StockportWebapp.ViewModels
@model StockportWebapp.ViewModels.HealthyStockport.HomepageViewModel

@inject StockportWebapp.FeatureToggling.FeatureToggles featureToggles

@{
    ViewData["Title"] = "Welcome to Healthy Stockport";
    Layout = "../Shared/_LayoutHome.cshtml";
    ViewData["og:title"] = "Welcome to Stockport Council";

}
@section BackgroundImage
{
    @Html.Partial("ScaleImageByDevice", new Image("l-background-hs-image", Model.Homepage.BackgroundImage))
}
@section CarouselBackgroundImage
{
    @{ int counter = 1; }
    @foreach (var carouselContent in Model.Homepage.CarouselContents)
    {
        @Html.Partial("ScaleImageByDevice", new Image("webcast-" + counter, carouselContent.Image))
        counter++;
    }
}
<div>
    <div class="grid-100 l-background-hs-image">
        <div class="introduction grid-50"> 
            @Html.Raw(Model.Homepage.FreeText)
        </div>
    </div>   

    <div class="l-body-section-filled grid-100">
        <section aria-label="Healthy Stockport" class="grid-100 mobile-grid-100 feature feature-container">
            <h2>@Model.Homepage.FeaturedTasksHeading</h2>
            <hr />
            <p class="feature-tagline feature-tagline-heading">@Model.Homepage.FeaturedTasksSummary</p>
            <div class="topic-block-list matchbox-parent" id="topicBlockList">
                @foreach (var subItem in Model.Homepage.FeaturedTasks)
                {
                    <div class="grid-30 tablet-grid-40 mobile-grid-100 topic-block-container">
                        <a href="@subItem.NavigationLink" class="topic-block matchbox-child">

                            <div class="topic-block-content">
                                <i class="fa @subItem.Icon fa-3x default-icon hide-on-mobile"></i>
                                <div class="hide-on-tablet hide-on-desktop topic-block-icon-container">
                                    <i class="fa @subItem.Icon fa-2x default-icon article-chevron-i"></i>
                                </div>                              
                                <h4>@subItem.Title</h4>

                                <div class="topic-block-content-divider hide-on-mobile"></div>
                                <p class="hide-on-mobile">@subItem.Teaser</p>
                                <div class="article-chevron hide-on-tablet hide-on-desktop l-right-align">
                                    <i aria-hidden="true" class="fa fa-2x fa-angle-right article-chevron-i"></i>
                                </div>
                            </div>
                        </a>
                    </div>
                }    
            </div>

            @if (featureToggles.HealthyStockportHomepageEvents)
            {
                <section aria-label="Healthy Stockport" class="grid-100 mobile-grid-100 feature feature-container">
                    <h2>Things to do</h2>
                    <hr />
                    <p class="feature-tagline feature-tagline-heading">There are lots of things to do in Stockport. Etc</p>
                    <div class="grid-100 grid-parent event-container-row matchbox-parent">
                        @foreach (var item in Model.Events)
                        {
                            <div>
                                @Html.Partial("EventCard", item)
                            </div>
                        }
                    </div>
                </section>
            }
            @if (Model.Homepage.CarouselContents.Count() != 0)
            {
                <div class="grid-100 grid-parent hs-carousel-container">
                    @Html.Partial("Carousel", Model.Homepage.CarouselContents)
                </div>
            }
            </section>
    </div>
</div>
